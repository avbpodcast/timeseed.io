<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Support TimeSeed.io</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/lib/qrcode.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap');
    body {
      font-family: 'Poppins', sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #2D2D2D;
      color: #F3F4F6;
    }
    .hero {
      text-align: center;
      padding: 4rem 2rem;
      background: linear-gradient(180deg, #374151, #2D2D2D);
    }
    h1 {
      color: #F59E0B;
      font-weight: 700;
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }
    h2 {
      color: #F59E0B;
      font-weight: 600;
      font-size: 1.5rem;
    }
    p, li {
      color: #F3F4F6;
    }
    a {
      color: #0D9488;
      text-decoration: none;
    }
    a:hover {
      color: #14B8A6;
      text-decoration: underline;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem;
      background: #374151;
      border-radius: 1rem;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }
    .options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .details {
      text-align: center;
    }
    .address {
      background: #2D2D2D;
      padding: 1rem;
      border-radius: 0.5rem;
      font-family: monospace;
      color: #F3F4F6;
      white-space: pre-wrap;
      overflow-wrap: break-word;
      margin: 1.5rem 0;
      border: 1px solid #6B7280;
    }
    .highlight-box {
      background: rgba(13, 148, 136, 0.2);
      padding: 1.5rem;
      border-radius: 0.75rem;
      margin-top: 2rem;
      text-align: center;
      border: 1px solid #0D9488;
    }
    button {
      background: #F59E0B;
      color: #F3F4F6;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 0.5rem;
      font-weight: 500;
      font-size: 0.875rem;
      cursor: pointer;
      transition: background 0.2s ease, transform 0.2s ease;
    }
    button:hover {
      background: #FBBF24;
      transform: translateY(-1px);
    }
    button:active {
      background: #D97706;
    }
    .hidden {
      display: none;
    }
    #qrcode {
      margin: 1.5rem auto;
      display: flex;
      justify-content: center;
    }
    #qrcode img {
      max-width: 100%;
      border-radius: 0.5rem;
      border: 2px solid #0D9488;
    }
    .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #F3F4F6;
      border-top: 4px solid #F59E0B;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 1.5rem auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    hr {
      border: 0;
      border-top: 1px solid #6B7280;
      margin: 2rem 0;
    }
    small {
      color: #D1D5DB;
    }
    strong {
      color: #F3F4F6;
      font-weight: 600;
    }
    footer {
      margin-top: 2rem;
      text-align: center;
      padding: 1rem;
    }
    footer a {
      color: #D1D5DB;
      text-decoration: none;
      margin: 0 0.5rem;
    }
    footer a:hover {
      color: #14B8A6;
    }
    @media (max-width: 640px) {
      .hero {
        padding: 2rem 1rem;
      }
      h1 {
        font-size: 2rem;
      }
      .container {
        padding: 1.5rem;
        margin: 1rem;
      }
      .options {
        grid-template-columns: 1fr;
      }
      button {
        padding: 0.5rem 1rem;
        font-size: 0.875rem;
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="hero">
    <h1>Support TimeSeed.io</h1>
    <p>Your contributions fuel the development of our open-source, privacy-focused tools. <br>We operate on a value-for-value basis ... thank you for your support!</p>
  </div>

  <div class="container">
    <h2>Choose a Donation Method</h2>
    <p>Select a cryptocurrency donation option below to support TimeSeed.io:</p>

    <div id="options" class="options"></div>

    <div id="details" class="details hidden">
      <h2 id="details-title"></h2>
      <p id="details-info"></p>
      <p id="details-address" class="address"></p>
      <div id="qrcode">
        <div class="spinner"></div>
      </div>
      <button onclick="backToOptions()">Back</button>
    </div>

    <div class="highlight-box">
      <p><strong>Why Donate?</strong> Your support helps us maintain and improve TimeSeed.io, ensuring privacy remains a human right. Every contribution counts!</p>
    </div>
  </div>

  <hr />
  <p style="text-align: center;"><small>TimeSeed is free, open-source, and designed for a future where privacy is a human right.</small></p>

  <footer class="text-sm text-[#D1D5DB] mt-4 text-center">
    <a href="https://github.com/avbpodcast/timeseed.io" class="hover:text-[#14B8A6]">Source</a> | 
    <a href="https://avbpodcast.github.io/timeseed.io/TSexplained.html" class="hover:text-[#14B8A6]">How does it work?</a> |
    <a href="https://avbpodcast.github.io/timeseed.io/donate.html" class="hover:text-[#14B8A6]">Fund Development</a> | 
    <a href="https://avbpodcast.github.io/timeseed.io" onclick="downloadPage()" class="hover:text-[#14B8A6]">Download</a> | 
    <a href="https://avbpodcast.github.io/timeseed.io/contact.html" class="hover:text-[#14B8A6]">Contact</a> |  
    version 1.13 beta
  </footer>

  <script>
    // Preload images
    const images = [
      'https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/mr21.png',
      'https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/bolt12.png',
      'https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/onchain.png',
      'https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/silent.png'
    ];
    images.forEach(src => {
      const img = new Image();
      img.src = src;
    });

    const donationOptions = [
      {
        name: "Lightning Network",
        image: "https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/mr21.png",
        address: "mr21@walletofsatoshi.com",
        details: "<strong>Warning:</strong> Donate through Lightning Network to 'Mr21'."
      },
      {
        name: "Bitcoin On-Chain",
        image: "https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/onchain.png",
        address: "bc1pkgzpgtzz4g89nm8zfsw898ruq9k8az2h27p6fx9qtq8xkqfnqwwqlaefyq",
        details: "The best, preferred way to donate Bitcoin: on-chain, direct and without intermediaries. This is a Taproot address."
      },
      {
        name: "Silent Payment",
        image: "https://raw.githubusercontent.com/avbpodcast/timeseed.io/main/silent2.png",
        address: "sp1qqv5t58fjkc77l7repqgy7x5pudp4dh3vypddle7eyplassvgvfp85qu3lfu2dd87ws8ltetshtdqut3yg3r9qm4650u5fwruwe0ad4u38gkkq3hr",
        details: "Silent Payments are supported by Phoenix, Blue Wallet, DANA, Cake Wallet, and WabiSabi. More to come soon! <a href='https://github.com/bitcoin/bips/blob/master/bip-0353.mediawiki' target='_blank' rel='noopener noreferrer'>Learn more about BIP353</a>."
      }
    ];

    function loadOptions() {
      const optionsDiv = document.getElementById('options');
      optionsDiv.innerHTML = '';

      donationOptions.forEach(option => {
        const button = document.createElement('button');
        button.textContent = option.name;
        button.onclick = () => showDetails(option);
        optionsDiv.appendChild(button);
      });
    }

    function showDetails(option) {
      document.getElementById('options').classList.add('hidden');
      const detailsDiv = document.getElementById('details');
      detailsDiv.classList.remove('hidden');

      document.getElementById('details-title').textContent = option.name;
      document.getElementById('details-info').innerHTML = option.details;
      document.getElementById('details-address').textContent = option.address;

      const qrDiv = document.getElementById('qrcode');
      qrDiv.innerHTML = '<div class="spinner"></div>';
      const spinner = qrDiv.querySelector('.spinner');
      spinner.style.display = 'block';

      if (typeof QRCode === 'undefined' && !option.image) {
        qrDiv.innerHTML = '<p style="color: #F87171;">Error: QR code generation failed. Please try again later.</p>';
        spinner.style.display = 'none';
        console.error('QRCode library not loaded');
        return;
      }

      setTimeout(() => {
        qrDiv.innerHTML = '';
        if (option.image) {
          const img = document.createElement('img');
          img.src = option.image;
          img.alt = `${option.name} QR Code`;
          img.onerror = () => {
            qrDiv.innerHTML = '<p style="color: #F87171;">Error: Failed to load QR code image.</p>';
          };
          qrDiv.appendChild(img);
        } else if (option.address) {
          try {
            new QRCode(qrDiv, {
              text: option.address,
              width: 300,
              height: 300,
              colorDark: '#F59E0B',
              colorLight: '#2D2D2D'
            });
          } catch (e) {
            qrDiv.innerHTML = '<p style="color: #F87171;">Error: Failed to generate QR code.</p>';
            console.error('QRCode generation error:', e);
          }
        }
        spinner.style.display = 'none';
      }, 300);
    }

    function backToOptions() {
      document.getElementById('options').classList.remove('hidden');
      document.getElementById('details').classList.add('hidden');
      document.getElementById('qrcode').innerHTML = '';
      document.getElementById('details-address').textContent = '';
    }

    function downloadPage() {
      const htmlContent = document.documentElement.outerHTML;
      const blob = new Blob([htmlContent], { type: 'text/html' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'timeseed-donate-v1_13.html';
      a.click();
      URL.revokeObjectURL(url);
    }

    // Load options immediately
    loadOptions();
  </script>
</body>

</html>
